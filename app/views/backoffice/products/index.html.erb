<div class="row">
    <div class="col-lg-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                Listando Produtos
                <%= link_to "Novo Produto", '#collapseExample', class:"btn btn-outline btn-success btn-sm pull-right", id: 'btn-novo-produto', style:"margin-top: -5px;", remote: true, role:"button", data: {toggle:"collapse"}, aria: {expanded:"false", controls:"collapseExample"}, onclick:"muda();" %>
            </div>
            <div class="collapse" id="collapseExample">
              <div class="well" style="border-top-right-radius: 0px; border-top-left-radius: 0px;">
                <%= render partial: 'backoffice/products/shared/form' %>
              </div>
            </div>
            <!-- /.panel-heading -->
            <div class="panel-body">
                <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Versão</th>
                            <th>Link</th>
                            <th>Categoria</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                    <% @products.each do |product| %>
                    <tr>
                        <td><%= product.id %></td>
                        <td><%= product.name %></td>
                        <td><%= product.version %></td>
                        <td><%= product.link %></td>
                        <td><%= product.category %></td>
                        <td style="width: 110px;">
                            <%= link_to "Editar", edit_backoffice_product_path(product), class:"btn btn-outline btn-primary btn-xs", remote: true %>
                            <%= link_to "Apagar", backoffice_product_path(product), method: :delete, class:"btn btn-outline btn-danger btn-xs", data: {confirm: "Você tem certeza que deseja deletar o produto <b>#{product.name}</b>?"} %>
                        </td>
                    </tr>
                    <% end %>
                    </tbody>
                </table>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->
    </div>
    <!-- /.col-lg-12 -->
</div>
            <!-- /.row -->
<script>
$(document).ready(function() {
    $('#dataTables-example').DataTable({
        responsive: true
    });
});
</script>

<%= render partial: 'backoffice/products/shared/form_modal' %>

<script language="JavaScript" type="text/javascript">
    function muda(){
        valor = document.getElementById('btn-novo-produto').innerHTML;
        if(valor == 'Novo Produto'){
           document.getElementById('btn-novo-produto').innerHTML = 'Fechar';
       }else{
           document.getElementById('btn-novo-produto').innerHTML = 'Novo Produto';
       }
    }
</script>
